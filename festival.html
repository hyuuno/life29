<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂÖÉÊó¶Âø´‰πê ¬∑ Life29</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EüéÜ%3C/text%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Noto+Serif+SC:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            overflow: hidden;
            cursor: crosshair;
        }
        
        .festival-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
        }
        
        .background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('images/festival-bg.jpg');
            background-size: cover;
            background-position: center;
            filter: brightness(0.6);
        }
        
        #fireworksCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: linear-gradient(to bottom, rgba(0,0,0,0.4), transparent);
        }
        
        .logo {
            display: flex;
            align-items: baseline;
            gap: 2px;
            text-decoration: none;
        }
        .logo-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.75rem;
            font-weight: 300;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .logo-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            color: #ffb7c5;
            margin-left: 2px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        .nav {
            display: flex;
            gap: 8px;
        }
        .nav-link {
            font-size: 0.875rem;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        .nav-link:hover {
            color: #fff;
            background: rgba(255,255,255,0.1);
        }
        .nav-link.active {
            color: #fff;
            background: rgba(255,255,255,0.15);
        }
        
        .greeting {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 50;
            pointer-events: none;
        }
        
        .greeting-year {
            font-family: 'Cormorant Garamond', serif;
            font-size: 8rem;
            font-weight: 300;
            color: #fff;
            text-shadow: 0 4px 30px rgba(255,180,200,0.5);
            line-height: 1;
            opacity: 0.9;
            animation: glow 3s ease-in-out infinite;
        }
        
        .greeting-text {
            font-size: 2rem;
            font-weight: 300;
            color: #fff;
            text-shadow: 0 2px 20px rgba(0,0,0,0.5);
            margin-top: 10px;
            letter-spacing: 0.3em;
            opacity: 0.9;
        }
        
        .greeting-sub {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
            margin-top: 20px;
            letter-spacing: 0.1em;
        }
        
        @keyframes glow {
            0%, 100% { text-shadow: 0 4px 30px rgba(255,180,200,0.5); }
            50% { text-shadow: 0 4px 50px rgba(255,200,150,0.8), 0 0 80px rgba(255,150,100,0.3); }
        }
        
        .hint {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.6);
            font-size: 0.8rem;
            letter-spacing: 0.1em;
            z-index: 50;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .sound-toggle {
            position: fixed;
            bottom: 40px;
            right: 40px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            transition: all 0.3s;
        }
        .sound-toggle:hover {
            background: rgba(255,255,255,0.2);
        }
        .sound-toggle.muted svg {
            opacity: 0.4;
        }
    </style>
</head>
<body>
    <div class="festival-container">
        <div class="background"></div>
        <canvas id="fireworksCanvas"></canvas>
    </div>
    
    <header class="header">
        <a href="index.html" class="logo">
            <span class="logo-text">Life</span>
            <span class="logo-number">29</span>
        </a>
        <nav class="nav">
            <a href="index.html" class="nav-link">Âú∞ÁêÉ</a>
            <a href="schedule.html" class="nav-link">ÂÅöÂí©</a>
            <a href="music.html" class="nav-link">Music</a>
            <a href="relax.html" class="nav-link">Relax</a>
            <a href="festival.html" class="nav-link active">ËäÇÊó•</a>
        </nav>
    </header>
    
    <div class="greeting">
        <div class="greeting-year">2026</div>
        <div class="greeting-text">ÂÖÉÊó¶Âø´‰πê</div>
        <div class="greeting-sub">Happy New Year</div>
    </div>
    
    <div class="hint">ÁÇπÂáªÂ±èÂπïÊîæÁÉüËä± ‚ú®</div>
    
    <button class="sound-toggle" id="soundToggle" title="Èü≥ÊïàÂºÄÂÖ≥">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
        </svg>
    </button>

    <script>
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // ÁÉüËä±Á≤íÂ≠êÁ±ª
        class Particle {
            constructor(x, y, color, velocity, size, type) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = velocity;
                this.size = size;
                this.type = type;
                this.alpha = 1;
                this.decay = Math.random() * 0.008 + 0.005; // Êõ¥ÊÖ¢ÁöÑË°∞Âáè
                this.gravity = 0.025; // Êõ¥Â∞èÁöÑÈáçÂäõ
                this.friction = 0.985; // Êõ¥ÊÖ¢ÁöÑÂáèÈÄü
                this.trail = [];
                this.maxTrail = type === 'spark' ? 10 : 6;
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() - 0.5) * 0.05;
            }
            
            update() {
                this.trail.push({ x: this.x, y: this.y, alpha: this.alpha });
                if (this.trail.length > this.maxTrail) {
                    this.trail.shift();
                }
                
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= this.decay;
                this.rotation += this.rotationSpeed;
            }
            
            draw() {
                // ÁªòÂà∂ËΩ®Ëøπ
                this.trail.forEach((point, index) => {
                    const trailAlpha = (index / this.trail.length) * this.alpha * 0.4;
                    ctx.save();
                    ctx.globalAlpha = trailAlpha;
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, this.size * 0.4, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                });
                
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                
                switch (this.type) {
                    case 'star':
                        this.drawStar(0, 0, 5, this.size, this.size * 0.5);
                        break;
                    case 'heart':
                        this.drawHeart(0, 0, this.size * 0.6);
                        break;
                    case 'spark':
                        ctx.beginPath();
                        ctx.moveTo(-this.size, 0);
                        ctx.lineTo(this.size, 0);
                        ctx.moveTo(0, -this.size);
                        ctx.lineTo(0, this.size);
                        ctx.strokeStyle = this.color;
                        ctx.lineWidth = this.size * 0.3;
                        ctx.stroke();
                        break;
                    default:
                        ctx.beginPath();
                        ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                        ctx.fill();
                        // Ê∑ªÂä†ÂÖâÊôï
                        ctx.shadowBlur = this.size * 3;
                        ctx.shadowColor = this.color;
                        ctx.fill();
                }
                
                ctx.restore();
            }
            
            drawStar(cx, cy, spikes, outerRadius, innerRadius) {
                let rot = Math.PI / 2 * 3;
                let step = Math.PI / spikes;
                
                ctx.beginPath();
                ctx.moveTo(cx, cy - outerRadius);
                
                for (let i = 0; i < spikes; i++) {
                    let x = cx + Math.cos(rot) * outerRadius;
                    let y = cy + Math.sin(rot) * outerRadius;
                    ctx.lineTo(x, y);
                    rot += step;
                    
                    x = cx + Math.cos(rot) * innerRadius;
                    y = cy + Math.sin(rot) * innerRadius;
                    ctx.lineTo(x, y);
                    rot += step;
                }
                
                ctx.lineTo(cx, cy - outerRadius);
                ctx.closePath();
                ctx.fill();
            }
            
            drawHeart(x, y, size) {
                ctx.beginPath();
                ctx.moveTo(x, y + size * 0.3);
                ctx.bezierCurveTo(x, y, x - size, y, x - size, y + size * 0.6);
                ctx.bezierCurveTo(x - size, y + size, x, y + size * 1.2, x, y + size * 1.5);
                ctx.bezierCurveTo(x, y + size * 1.2, x + size, y + size, x + size, y + size * 0.6);
                ctx.bezierCurveTo(x + size, y, x, y, x, y + size * 0.3);
                ctx.fill();
            }
        }
        
        // ÁÉüËä±ÁÅ´ÁÆ≠Á±ª
        class Rocket {
            constructor(startX, startY, targetX, targetY, colorScheme) {
                this.x = startX;
                this.y = startY;
                this.targetX = targetX;
                this.targetY = targetY;
                this.colorScheme = colorScheme;
                
                const angle = Math.atan2(targetY - startY, targetX - startX);
                const distance = Math.sqrt(Math.pow(targetX - startX, 2) + Math.pow(targetY - startY, 2));
                const speed = Math.min(distance * 0.015, 8); // Êõ¥ÊÖ¢ÁöÑ‰∏äÂçáÈÄüÂ∫¶
                
                this.velocity = {
                    x: Math.cos(angle) * speed,
                    y: Math.sin(angle) * speed
                };
                
                this.trail = [];
                this.distanceTraveled = 0;
                this.targetDistance = distance;
                this.exploded = false;
                this.sparkTimer = 0;
            }
            
            update() {
                this.trail.push({ x: this.x, y: this.y, alpha: 1 });
                if (this.trail.length > 20) {
                    this.trail.shift();
                }
                
                // ËΩ®ËøπÊ∑°Âá∫
                this.trail.forEach(point => {
                    point.alpha *= 0.95;
                });
                
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                
                // ÂæÆÂº±ÁöÑÊäñÂä®
                this.x += (Math.random() - 0.5) * 0.5;
                
                this.distanceTraveled += Math.sqrt(
                    Math.pow(this.velocity.x, 2) + Math.pow(this.velocity.y, 2)
                );
                
                if (this.distanceTraveled >= this.targetDistance * 0.95) {
                    this.exploded = true;
                }
                
                this.sparkTimer++;
            }
            
            draw() {
                // ÁªòÂà∂ËΩ®Ëøπ
                this.trail.forEach((point, index) => {
                    const alpha = point.alpha * 0.6;
                    const size = 2 + (index / this.trail.length) * 2;
                    ctx.save();
                    ctx.globalAlpha = alpha;
                    ctx.fillStyle = '#FFA500';
                    ctx.shadowBlur = 8;
                    ctx.shadowColor = '#FF6600';
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                });
                
                // ÁªòÂà∂ÁÅ´ÁÆ≠Â§¥
                ctx.save();
                ctx.fillStyle = '#fff';
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#FFF';
                ctx.beginPath();
                ctx.arc(this.x, this.y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
                
                // ÁÅ´Ëä±ÊïàÊûú
                if (this.sparkTimer % 3 === 0) {
                    for (let i = 0; i < 2; i++) {
                        sparks.push({
                            x: this.x + (Math.random() - 0.5) * 4,
                            y: this.y + Math.random() * 5,
                            vx: (Math.random() - 0.5) * 1,
                            vy: Math.random() * 2,
                            alpha: 1,
                            size: Math.random() * 2 + 1
                        });
                    }
                }
            }
        }
        
        // È¢úËâ≤ÊñπÊ°à
        const colorSchemes = [
            ['#FFD700', '#FFA500', '#FF8C00', '#FFEC8B', '#FFE4B5'], // ÈáëËâ≤
            ['#FF6B6B', '#FF4757', '#FF3838', '#FF6348', '#FF7675'], // Á∫¢Ëâ≤
            ['#FF69B4', '#FF1493', '#FFB6C1', '#FFC0CB', '#FF82AB'], // Á≤âËâ≤
            ['#00CED1', '#00BFFF', '#1E90FF', '#87CEEB', '#ADD8E6'], // ËìùËâ≤
            ['#9B59B6', '#8E44AD', '#DDA0DD', '#DA70D6', '#BA55D3'], // Á¥´Ëâ≤
            ['#2ECC71', '#27AE60', '#90EE90', '#98FB98', '#00FA9A'], // ÁªøËâ≤
            ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#8B00FF'], // ÂΩ©Ëôπ
            ['#FFFFFF', '#F5F5F5', '#FFFAFA', '#E0E0E0', '#C0C0C0']  // Èì∂ÁôΩ
        ];
        
        const shapes = ['circle', 'star', 'heart', 'spark', 'circle', 'circle', 'circle'];
        
        let rockets = [];
        let particles = [];
        let sparks = [];
        
        // ÂàõÂª∫ÁàÜÁÇ∏
        function createExplosion(x, y, colorScheme) {
            const colors = colorScheme;
            const particleCount = 100 + Math.floor(Math.random() * 50);
            const shape = shapes[Math.floor(Math.random() * shapes.length)];
            
            // ‰∏ªÁàÜÁÇ∏ - ÁêÉÂΩ¢Â±ïÂºÄ
            for (let i = 0; i < particleCount; i++) {
                const angle = (Math.PI * 2 / particleCount) * i + Math.random() * 0.1;
                const speed = Math.random() * 3 + 1.5; // Êõ¥ÊÖ¢ÁöÑÈÄüÂ∫¶
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                particles.push(new Particle(
                    x, y,
                    color,
                    { x: Math.cos(angle) * speed, y: Math.sin(angle) * speed },
                    Math.random() * 2.5 + 1,
                    shape
                ));
            }
            
            // ÂÜÖÂúà‰∫ÆÁÇπ
            for (let i = 0; i < 40; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 2 + 0.5;
                
                particles.push(new Particle(
                    x, y,
                    '#FFFFFF',
                    { x: Math.cos(angle) * speed, y: Math.sin(angle) * speed },
                    Math.random() * 1.5 + 0.5,
                    'circle'
                ));
            }
            
            // Êí≠ÊîæÁàÜÁÇ∏Èü≥Êïà
            playExplosionSound();
        }
        
        // ÂèëÂ∞ÑÁÉüËä±
        function launchFirework(targetX, targetY) {
            const startX = targetX + (Math.random() - 0.5) * 80;
            const startY = canvas.height + 50;
            const colorScheme = colorSchemes[Math.floor(Math.random() * colorSchemes.length)];
            
            rockets.push(new Rocket(startX, startY, targetX, targetY, colorScheme));
            
            // Êí≠ÊîæÂèëÂ∞ÑÈü≥Êïà
            playLaunchSound();
        }
        
        // Èü≥ÊïàÁ≥ªÁªü
        let soundEnabled = true;
        let audioContext = null;
        
        function getAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            return audioContext;
        }
        
        // ÂèëÂ∞ÑÈü≥Êïà - Âò∂Âò∂Â£∞
        function playLaunchSound() {
            if (!soundEnabled) return;
            
            try {
                const ctx = getAudioContext();
                const duration = 0.8;
                
                // Âô™Â£∞ÁîüÊàêÂô®
                const bufferSize = ctx.sampleRate * duration;
                const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
                const output = noiseBuffer.getChannelData(0);
                
                for (let i = 0; i < bufferSize; i++) {
                    output[i] = Math.random() * 2 - 1;
                }
                
                const noise = ctx.createBufferSource();
                noise.buffer = noiseBuffer;
                
                // È´òÈÄöÊª§Ê≥¢Âô® - ‰∫ßÁîüÂò∂Âò∂Â£∞
                const highpass = ctx.createBiquadFilter();
                highpass.type = 'highpass';
                highpass.frequency.value = 3000;
                
                // Èü≥ÈáèÂåÖÁªú
                const gainNode = ctx.createGain();
                gainNode.gain.setValueAtTime(0.08, ctx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
                
                noise.connect(highpass);
                highpass.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                noise.start(ctx.currentTime);
                noise.stop(ctx.currentTime + duration);
            } catch (e) {}
        }
        
        // ÁàÜÁÇ∏Èü≥Êïà - Á†∞ÁöÑÁàÜÁ†¥Â£∞
        function playExplosionSound() {
            if (!soundEnabled) return;
            
            try {
                const ctx = getAudioContext();
                
                // ‰ΩéÈ¢ëÁàÜÁ†¥Â£∞
                const oscillator = ctx.createOscillator();
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(150, ctx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(30, ctx.currentTime + 0.2);
                
                const gainNode = ctx.createGain();
                gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
                
                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                oscillator.start(ctx.currentTime);
                oscillator.stop(ctx.currentTime + 0.3);
                
                // Âô™Â£∞ÁàÜÁ†¥
                const duration = 0.4;
                const bufferSize = ctx.sampleRate * duration;
                const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
                const output = noiseBuffer.getChannelData(0);
                
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / bufferSize;
                    output[i] = (Math.random() * 2 - 1) * Math.exp(-t * 8);
                }
                
                const noise = ctx.createBufferSource();
                noise.buffer = noiseBuffer;
                
                const noiseGain = ctx.createGain();
                noiseGain.gain.setValueAtTime(0.15, ctx.currentTime);
                
                // Â∏¶ÈÄöÊª§Ê≥¢
                const bandpass = ctx.createBiquadFilter();
                bandpass.type = 'bandpass';
                bandpass.frequency.value = 500;
                bandpass.Q.value = 0.5;
                
                noise.connect(bandpass);
                bandpass.connect(noiseGain);
                noiseGain.connect(ctx.destination);
                
                noise.start(ctx.currentTime);
                noise.stop(ctx.currentTime + duration);
                
                // È´òÈ¢ëÁ¢éË£ÇÂ£∞
                setTimeout(() => {
                    if (!soundEnabled) return;
                    const crackle = ctx.createBufferSource();
                    const crackleBuffer = ctx.createBuffer(1, ctx.sampleRate * 0.5, ctx.sampleRate);
                    const crackleData = crackleBuffer.getChannelData(0);
                    
                    for (let i = 0; i < crackleData.length; i++) {
                        if (Math.random() < 0.1) {
                            crackleData[i] = (Math.random() * 2 - 1) * Math.exp(-i / crackleData.length * 3);
                        }
                    }
                    
                    crackle.buffer = crackleBuffer;
                    const crackleGain = ctx.createGain();
                    crackleGain.gain.value = 0.08;
                    
                    crackle.connect(crackleGain);
                    crackleGain.connect(ctx.destination);
                    crackle.start();
                }, 100);
                
            } catch (e) {}
        }
        
        // Èü≥ÊïàÂºÄÂÖ≥
        document.getElementById('soundToggle').addEventListener('click', () => {
            soundEnabled = !soundEnabled;
            document.getElementById('soundToggle').classList.toggle('muted', !soundEnabled);
            
            // ÂàùÂßãÂåñÈü≥È¢ë‰∏ä‰∏ãÊñá
            if (soundEnabled && !audioContext) {
                getAudioContext();
            }
        });
        
        // ÁÇπÂáªÂèëÂ∞Ñ
        canvas.addEventListener('click', (e) => {
            // ÂàùÂßãÂåñÈü≥È¢ë‰∏ä‰∏ãÊñáÔºàÈúÄË¶ÅÁî®Êà∑‰∫§‰∫íÔºâ
            if (!audioContext) {
                getAudioContext();
            }
            launchFirework(e.clientX, e.clientY);
        });
        
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (!audioContext) {
                getAudioContext();
            }
            const touch = e.touches[0];
            launchFirework(touch.clientX, touch.clientY);
        });
        
        // Ëá™Âä®ÁÉüËä±
        setInterval(() => {
            if (Math.random() < 0.25) {
                const x = Math.random() * canvas.width * 0.8 + canvas.width * 0.1;
                const y = Math.random() * canvas.height * 0.4 + canvas.height * 0.15;
                launchFirework(x, y);
            }
        }, 3000);
        
        // ÂºÄÂú∫ÁÉüËä±
        setTimeout(() => launchFirework(canvas.width * 0.3, canvas.height * 0.35), 800);
        setTimeout(() => launchFirework(canvas.width * 0.7, canvas.height * 0.3), 1500);
        setTimeout(() => launchFirework(canvas.width * 0.5, canvas.height * 0.25), 2500);
        
        // Âä®ÁîªÂæ™ÁéØ
        function animate() {
            // ÂÆåÂÖ®Ê∏ÖÈô§ÁîªÂ∏ÉÔºàÊó†ÊÆãÁïôÔºâ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Êõ¥Êñ∞ÁÅ´Ëä±
            sparks = sparks.filter(spark => {
                spark.x += spark.vx;
                spark.y += spark.vy;
                spark.vy += 0.1;
                spark.alpha -= 0.03;
                
                if (spark.alpha > 0) {
                    ctx.save();
                    ctx.globalAlpha = spark.alpha;
                    ctx.fillStyle = '#FFA500';
                    ctx.beginPath();
                    ctx.arc(spark.x, spark.y, spark.size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                    return true;
                }
                return false;
            });
            
            // Êõ¥Êñ∞ÁÅ´ÁÆ≠
            rockets = rockets.filter(rocket => {
                rocket.update();
                rocket.draw();
                
                if (rocket.exploded) {
                    createExplosion(rocket.x, rocket.y, rocket.colorScheme);
                    return false;
                }
                return true;
            });
            
            // Êõ¥Êñ∞Á≤íÂ≠ê
            particles = particles.filter(particle => {
                particle.update();
                particle.draw();
                return particle.alpha > 0.01;
            });
            
            requestAnimationFrame(animate);
        }
        
        animate();
    </script>
</body>
</html>
